# pygs
Python bindings for 3dgs rendering.

This is a more modularized and organized code of my previous c++ project [vkgs](https://github.com/jaesung-cs/vkgs).

This code is being actively developed, so expect some bugs until the codes are stabilized.

![train](/media/train.gif) ![random](/media/random.gif)

Animation generated by `pygs`.
```python
import pygs
splats = pygs.load_from_ply("my_splats.ply")
images = pygs.draw(
  splats,
  viewmats,          # np.ndarray, (C, 4, 4)
  Ks,                # np.ndarray, (C, 3, 3)
  width, height,     # int
  near=0.1, far=1e3  # Do not use too low near nor too high far, otherwise z-fighting
).numpy()            # np.ndarray, (C, H, W, 3), np.uint8

from PIL import Image
for i in range(len(images)):
  Image.fromarray(images[i, :, :, :3]).save(f"color_{i}.png")
  Image.fromarray(images[i, :, :, 3]).save(f"alpha_{i}.png")
```

## Feature Highlights
- Fast speed: rasterization using Graphics capability.
- Memory-efficiency: reuse resources by double buffering.
- Pure Vulkan with very few dependencies. No CUDA required.

## Limitations
- Only importable `.ply` format files, SH degree 3, from the original Gaussian Splatting.
- No gradient computation.
- Rendering image slightly differs from `gsplat` (suspectedly due to splat culling logic, i.e. frustum test, near the camera)
- No package, no distribution yet, need to build from source and install by yourself.

## Requirements
- `VulkanSDK`, with optional components `Volk`, `vma` installed.
  - `MacOS`: `>=1.4.328.1`, becuase `VK_KHR_push_descriptor` is supported by `MoltenVK` since then.
  - others: `>=1.4`
- `cmake`
- Python dependencies
  ```bash
  $ pip install -r requirements.txt
  ```

## Build Python Module
```bash
$ pip install ./binding
```

## Build c++
```bash
$ cmake . -B build
$ cmake --build build --config Release -j
```

## TODO
- [ ] Support SH degree
- [ ] Support background color
- [ ] Device selection
- [ ] c++ viewer
- [ ] Build wheels and publish
- [ ] Find reasons for pixel value difference with `gsplat`

## Technical Details

See [here](/DETAILS.md).
